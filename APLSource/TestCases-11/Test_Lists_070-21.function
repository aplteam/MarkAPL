 R←Test_Lists_070(stopFlag batchFlag);⎕TRAP;md;ns;parms;noOfListItems;expected;html
⍝ List that contains a table
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 md←''
 md,←⊂'* First list item'
 md,←⊂'* Second list item'
 md,←⊂''
 md,←⊂'  |col 1|col 2|'
 md,←⊂'  |-|-|'
 md,←⊂'  |row 1-1|row 1-2|'
 md,←⊂'  |row 2-1|row 2-2|'
 md,←⊂''
 md,←⊂'  Paragraph -a- after a table'
 md,←⊂''
 md,←⊂'  * Second list item'
 md,←⊂''
 md,←⊂'    |col 1|col 2|'
 md,←⊂'    |-|-|'
 md,←⊂'    |row 1-1|row 1-2|'
 md,←⊂'    |row 2-1|row 2-2|'
 md,←⊂''
 md,←⊂'    Paragraph -b- after a table'
 md,←⊂''

 ns←##.MarkAPL.Init''md
 ns←##.MarkAPL.Process ns

 expected←''
 expected,←⊂'<ul>'
 expected,←⊂'<li>First list item</li>'
 expected,←⊂'<li>Second list item'
 expected,←⊂'<table>'
 expected,←⊂'<thead>'
 expected,←⊂'<tr>'
 expected,←⊂'<th style="text-align: left;">col 1</th>'
 expected,←⊂'<th style="text-align: left;">col 2</th>'
 expected,←⊂'</tr>'
 expected,←⊂'</thead>'
 expected,←⊂'<tbody>'
 expected,←⊂'<tr>'
 expected,←⊂'<td>row 1-1</td>'
 expected,←⊂'<td>row 1-2</td>'
 expected,←⊂'</tr>'
 expected,←⊂'<tr>'
 expected,←⊂'<td>row 2-1</td>'
 expected,←⊂'<td>row 2-2</td>'
 expected,←⊂'</tr>'
 expected,←⊂'</tbody>'
 expected,←⊂'</table>'
 expected,←⊂'<p>Paragraph -a- after a table</p>'
 expected,←⊂'<ol start="* Second list item">'
 expected,←⊂'<li>Second list item'
 expected,←⊂'<table>'
 expected,←⊂'<thead>'
 expected,←⊂'<tr>'
 expected,←⊂'<th style="text-align: left;">col 1</th>'
 expected,←⊂'<th style="text-align: left;">col 2</th>'
 expected,←⊂'</tr>'
 expected,←⊂'</thead>'
 expected,←⊂'<tbody>'
 expected,←⊂'<tr>'
 expected,←⊂'<td>row 1-1</td>'
 expected,←⊂'<td>row 1-2</td>'
 expected,←⊂'</tr>'
 expected,←⊂'<tr>'
 expected,←⊂'<td>row 2-1</td>'
 expected,←⊂'<td>row 2-2</td>'
 expected,←⊂'</tr>'
 expected,←⊂'</tbody>'
 expected,←⊂'</table>'
 expected,←⊂'<p>Paragraph -b- after a table</p></li>'
 expected,←⊂'</ol></li>'
 expected,←⊂'</ul>'
 →FailsIf expected≢ns.html

 R←∆OK
