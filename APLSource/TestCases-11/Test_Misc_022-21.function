 R←Test_Misc_022(stopFlag batchFlag);⎕TRAP;path;filename;md;parms;report
⍝ Exercise `ConvertMarkdownFile` with `inputFilename` that is identical with `filename`
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 path←#.FilesAndDirs.GetTempPath,'\Test_ConvertMarkdownFile'
 :If #.FilesAndDirs.IsDir path
     #.FilesAndDirs.RmDir path
 :EndIf
 #.FilesAndDirs.MkDir path
 filename←path,'\Test_Misc_018.md'
 md←'# Test' '' '* This' '* That' '* More'
 #.APLTreeUtils.WriteUtf8File filename md
 parms←##.MarkAPL.CreateParms
 parms.inputFilename←filename

 report←parms ##.MarkAPL.ConvertMarkdownFile filename
 R←∆OK

∆TidyUp:
 #.FilesAndDirs.RmDir path
