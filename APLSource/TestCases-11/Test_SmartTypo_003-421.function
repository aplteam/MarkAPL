 R←Test_SmartTypo_003(stopFlag batchFlag);⎕TRAP;md;ns;parms;html;buff;expected
⍝ Test smart typography: -- => n-dash
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 md←''
 md,←⊂'First para -- really! -- with n-dashes --  (as in `--`) --, really (`--`)'
 md,←⊂''
 md,←⊂'Second para--really!'
 md,←⊂''
 md,←⊂'~~~'
 md,←⊂' `--` are converted -- automatically! -- with a RegEx.'
 md,←⊂'~~~'

 ns←##.MarkAPL.Init''md
 ns←##.MarkAPL.Process ns

 expected←'<p>First para – really! – with n-dashes – (as in <code>--</code>) –, really (<code>--</code>)</p>'
 →PassesIf expected≡0⊃ns.html
 expected←'<p>Second para–really!</p>'
 →PassesIf expected≡1⊃ns.html
 expected←'<pre><code> `--` are converted -- automatically! -- with a RegEx.</code></pre>'
 →PassesIf expected≡2⊃ns.html

 R←∆OK
