 R←Test_Table_004(stopFlag batchFlag);⎕TRAP;ns;parms;mat;html
⍝ Test table without column headers but alignments.
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 mat←''
 mat,←⊂'|:-|:-:|-:|'
 mat,←⊂'|APL|Brilliant|800|'
 mat,←⊂'|Cobol|Old|14000|'
 mat,←⊂'|F#|New|3400|'

 ns←##.MarkAPL.Init''mat
 ns←##.MarkAPL.Process ns

 html←1↓∊(⎕UCS 13),¨ns.html
 →FailsIf 9≠+/'<td'⍷html
 →FailsIf 9≠+/'</td>'⍷html
 →FailsIf 0≠+/'<th>'⍷html
 →FailsIf 0≠+/'</th>'⍷html
 →FailsIf 3≠+/'<tr>'⍷html
 →FailsIf 3≠+/'</tr>'⍷html
 →FailsIf 0≠+/'<thead>'⍷html
 →FailsIf 0≠+/'</thead>'⍷html
 →FailsIf 1≠+/'<tbody>'⍷html
 →FailsIf 1≠+/'</tbody>'⍷html
 →FailsIf 1≠+/'<table>'⍷html
 →FailsIf 1≠+/'</table>'⍷html
 →PassesIf∧/2{⍵>⍺}/1,{⍵⍳1}¨'center' 'right'⍷¨⊂html

 R←∆OK
